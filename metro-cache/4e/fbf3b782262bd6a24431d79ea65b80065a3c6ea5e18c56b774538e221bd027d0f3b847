{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"../ReanimatedModule","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _defineProperty2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/defineProperty\"));\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/createClass\"));\n\n  var _ReanimatedModule = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"../ReanimatedModule\"));\n\n  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n  var UPDATED_NODES = [];\n  var loopID = 1;\n  var propUpdatesEnqueued = null;\n\n  function sanitizeConfig(config) {\n    for (var key in config) {\n      var value = config[key];\n\n      if (value instanceof AnimatedNode) {\n        config[key] = value.__nodeID;\n      }\n    }\n\n    return config;\n  }\n\n  function runPropUpdates() {\n    var visitedNodes = new Set();\n\n    var findAndUpdateNodes = function findAndUpdateNodes(node) {\n      if (visitedNodes.has(node)) {\n        return;\n      } else {\n        visitedNodes.add(node);\n      }\n\n      if (typeof node.update === 'function') {\n        node.update();\n      } else {\n        node.__getChildren().forEach(findAndUpdateNodes);\n      }\n    };\n\n    for (var i = 0; i < UPDATED_NODES.length; i++) {\n      var node = UPDATED_NODES[i];\n      findAndUpdateNodes(node);\n    }\n\n    UPDATED_NODES.length = 0;\n    propUpdatesEnqueued = null;\n    loopID += 1;\n  }\n\n  var nodeCount = 0;\n\n  var AnimatedNode = function () {\n    function AnimatedNode(nodeConfig, inputNodes) {\n      (0, _classCallCheck2.default)(this, AnimatedNode);\n      this.__lastLoopID = 0;\n      this.__memoizedValue = null;\n      this.__children = [];\n      this.__nodeID = ++nodeCount;\n      this.__nodeConfig = sanitizeConfig(nodeConfig);\n      this.__initialized = false;\n      this.__inputNodes = inputNodes && inputNodes.filter(function (node) {\n        return node instanceof AnimatedNode;\n      });\n    }\n\n    (0, _createClass2.default)(AnimatedNode, [{\n      key: \"__attach\",\n      value: function __attach() {\n        var _this = this;\n\n        this.__nativeInitialize();\n\n        this.__inputNodes && this.__inputNodes.forEach(function (node) {\n          return node.__addChild(_this);\n        });\n      }\n    }, {\n      key: \"__detach\",\n      value: function __detach() {\n        var _this2 = this;\n\n        this.__inputNodes && this.__inputNodes.forEach(function (node) {\n          return node.__removeChild(_this2);\n        });\n\n        this.__nativeTearDown();\n      }\n    }, {\n      key: \"__getValue\",\n      value: function __getValue() {\n        if (this.__lastLoopID < loopID) {\n          this.__lastLoopID = loopID;\n          return this.__memoizedValue = this.__onEvaluate();\n        }\n\n        return this.__memoizedValue;\n      }\n    }, {\n      key: \"__forceUpdateCache\",\n      value: function __forceUpdateCache(newValue) {\n        this.__memoizedValue = newValue;\n\n        this.__markUpdated();\n      }\n    }, {\n      key: \"__dangerouslyRescheduleEvaluate\",\n      value: function __dangerouslyRescheduleEvaluate() {\n        this.__lastLoopID = 0;\n\n        this.__markUpdated();\n      }\n    }, {\n      key: \"__markUpdated\",\n      value: function __markUpdated() {\n        UPDATED_NODES.push(this);\n\n        if (!propUpdatesEnqueued) {\n          propUpdatesEnqueued = setImmediate(runPropUpdates);\n        }\n      }\n    }, {\n      key: \"__nativeInitialize\",\n      value: function __nativeInitialize() {\n        if (!this.__initialized) {\n          _ReanimatedModule.default.createNode(this.__nodeID, _objectSpread({}, this.__nodeConfig));\n\n          this.__initialized = true;\n        }\n      }\n    }, {\n      key: \"__nativeTearDown\",\n      value: function __nativeTearDown() {\n        if (this.__initialized) {\n          _ReanimatedModule.default.dropNode(this.__nodeID);\n\n          this.__initialized = false;\n        }\n      }\n    }, {\n      key: \"isNativelyInitialized\",\n      value: function isNativelyInitialized() {\n        return this.__initialized;\n      }\n    }, {\n      key: \"__onEvaluate\",\n      value: function __onEvaluate() {\n        throw new Error('Missing implementation of onEvaluate');\n      }\n    }, {\n      key: \"__getProps\",\n      value: function __getProps() {\n        return this.__getValue();\n      }\n    }, {\n      key: \"__getChildren\",\n      value: function __getChildren() {\n        return this.__children;\n      }\n    }, {\n      key: \"__addChild\",\n      value: function __addChild(child) {\n        if (this.__children.length === 0) {\n          this.__attach();\n        }\n\n        this.__children.push(child);\n\n        child.__nativeInitialize();\n\n        _ReanimatedModule.default.connectNodes(this.__nodeID, child.__nodeID);\n      }\n    }, {\n      key: \"__removeChild\",\n      value: function __removeChild(child) {\n        var index = this.__children.indexOf(child);\n\n        if (index === -1) {\n          console.warn(\"Trying to remove a child that doesn't exist\");\n          return;\n        }\n\n        _ReanimatedModule.default.disconnectNodes(this.__nodeID, child.__nodeID);\n\n        this.__children.splice(index, 1);\n\n        if (this.__children.length === 0) {\n          this.__detach();\n        }\n      }\n    }, {\n      key: \"_connectAnimatedView\",\n      value: function _connectAnimatedView(nativeViewTag) {\n        _ReanimatedModule.default.connectNodeToView(this.__nodeID, nativeViewTag);\n      }\n    }, {\n      key: \"_disconnectAnimatedView\",\n      value: function _disconnectAnimatedView(nativeViewTag) {\n        _ReanimatedModule.default.disconnectNodeFromView(this.__nodeID, nativeViewTag);\n      }\n    }]);\n    return AnimatedNode;\n  }();\n\n  exports.default = AnimatedNode;\n});","map":[[15,0,1,0],[21,0,3,0],[21,6,3,6,"UPDATED_NODES"],[21,19,3,19],[21,22,3,22],[21,24,3,0],[22,0,5,0],[22,6,5,4,"loopID"],[22,12,5,10],[22,15,5,13],[22,16,5,0],[23,0,6,0],[23,6,6,4,"propUpdatesEnqueued"],[23,25,6,23],[23,28,6,26],[23,32,6,0],[25,0,8,0],[25,11,8,9,"sanitizeConfig"],[25,25,8,0],[25,26,8,24,"config"],[25,32,8,0],[25,34,8,32],[26,0,9,2],[26,9,9,7],[26,13,9,13,"key"],[26,16,9,2],[26,20,9,20,"config"],[26,26,9,2],[26,28,9,28],[27,0,10,4],[27,10,10,10,"value"],[27,15,10,15],[27,18,10,18,"config"],[27,24,10,24],[27,25,10,25,"key"],[27,28,10,24],[27,29,10,4],[29,0,11,4],[29,10,11,8,"value"],[29,15,11,13],[29,27,11,25,"AnimatedNode"],[29,39,11,4],[29,41,11,39],[30,0,12,6,"config"],[30,8,12,6,"config"],[30,14,12,12],[30,15,12,13,"key"],[30,18,12,12],[30,19,12,6],[30,22,12,20,"value"],[30,27,12,25],[30,28,12,26,"__nodeID"],[30,36,12,6],[31,0,13,5],[32,0,14,3],[34,0,15,2],[34,11,15,9,"config"],[34,17,15,2],[35,0,16,1],[37,0,18,0],[37,11,18,9,"runPropUpdates"],[37,25,18,0],[37,28,18,26],[38,0,19,2],[38,8,19,8,"visitedNodes"],[38,20,19,20],[38,23,19,23],[38,27,19,27,"Set"],[38,30,19,23],[38,32,19,2],[40,0,20,2],[40,8,20,8,"findAndUpdateNodes"],[40,26,20,26],[40,29,20,29],[40,38,20,8,"findAndUpdateNodes"],[40,56,20,29],[40,57,20,29,"node"],[40,61,20,33],[40,63,20,37],[41,0,21,4],[41,10,21,8,"visitedNodes"],[41,22,21,20],[41,23,21,21,"has"],[41,26,21,8],[41,27,21,25,"node"],[41,31,21,8],[41,32,21,4],[41,34,21,32],[42,0,22,6],[43,0,23,5],[43,7,21,4],[43,13,23,11],[44,0,24,6,"visitedNodes"],[44,8,24,6,"visitedNodes"],[44,20,24,18],[44,21,24,19,"add"],[44,24,24,6],[44,25,24,23,"node"],[44,29,24,6],[45,0,25,5],[47,0,26,4],[47,10,26,8],[47,17,26,15,"node"],[47,21,26,19],[47,22,26,20,"update"],[47,28,26,8],[47,33,26,31],[47,43,26,4],[47,45,26,43],[48,0,27,6,"node"],[48,8,27,6,"node"],[48,12,27,10],[48,13,27,11,"update"],[48,19,27,6],[49,0,28,5],[49,7,26,4],[49,13,28,11],[50,0,29,6,"node"],[50,8,29,6,"node"],[50,12,29,10],[50,13,29,11,"__getChildren"],[50,26,29,6],[50,29,29,27,"forEach"],[50,36,29,6],[50,37,29,35,"findAndUpdateNodes"],[50,55,29,6],[51,0,30,5],[52,0,31,3],[52,5,20,2],[54,0,32,2],[54,9,32,7],[54,13,32,11,"i"],[54,14,32,12],[54,17,32,15],[54,18,32,2],[54,20,32,18,"i"],[54,21,32,19],[54,24,32,22,"UPDATED_NODES"],[54,37,32,35],[54,38,32,36,"length"],[54,44,32,2],[54,46,32,44,"i"],[54,47,32,45],[54,49,32,2],[54,51,32,49],[55,0,33,4],[55,10,33,10,"node"],[55,14,33,14],[55,17,33,17,"UPDATED_NODES"],[55,30,33,30],[55,31,33,31,"i"],[55,32,33,30],[55,33,33,4],[56,0,34,4,"findAndUpdateNodes"],[56,6,34,4,"findAndUpdateNodes"],[56,24,34,22],[56,25,34,23,"node"],[56,29,34,22],[56,30,34,4],[57,0,35,3],[59,0,36,2,"UPDATED_NODES"],[59,4,36,2,"UPDATED_NODES"],[59,17,36,15],[59,18,36,16,"length"],[59,24,36,2],[59,27,36,25],[59,28,36,2],[60,0,37,2,"propUpdatesEnqueued"],[60,4,37,2,"propUpdatesEnqueued"],[60,23,37,21],[60,26,37,24],[60,30,37,2],[61,0,38,2,"loopID"],[61,4,38,2,"loopID"],[61,10,38,8],[61,14,38,12],[61,15,38,2],[62,0,39,1],[64,0,41,0],[64,6,41,4,"nodeCount"],[64,15,41,13],[64,18,41,16],[64,19,41,0],[66,6,43,21,"AnimatedNode"],[66,18],[67,0,44,2],[67,26,44,14,"nodeConfig"],[67,36,44,2],[67,38,44,26,"inputNodes"],[67,48,44,2],[67,50,44,38],[68,0,44,38],[69,0,44,38],[69,11,64,2,"__lastLoopID"],[69,23,44,38],[69,26,64,17],[69,27,44,38],[70,0,44,38],[70,11,65,2,"__memoizedValue"],[70,26,44,38],[70,29,65,20],[70,33,44,38],[71,0,44,38],[71,11,67,2,"__children"],[71,21,44,38],[71,24,67,15],[71,26,44,38],[72,0,45,4],[72,11,45,9,"__nodeID"],[72,19,45,4],[72,22,45,20],[72,24,45,22,"nodeCount"],[72,33,45,4],[73,0,46,4],[73,11,46,9,"__nodeConfig"],[73,23,46,4],[73,26,46,24,"sanitizeConfig"],[73,40,46,38],[73,41,46,39,"nodeConfig"],[73,51,46,38],[73,52,46,4],[74,0,47,4],[74,11,47,9,"__initialized"],[74,24,47,4],[74,27,47,25],[74,32,47,4],[75,0,48,4],[75,11,48,9,"__inputNodes"],[75,23,48,4],[75,26,49,6,"inputNodes"],[75,36,49,16],[75,40,49,20,"inputNodes"],[75,50,49,30],[75,51,49,31,"filter"],[75,57,49,20],[75,58,49,38],[75,68,49,38,"node"],[75,72,49,42],[76,0,49,42],[76,15,49,46,"node"],[76,19,49,50],[76,31,49,62,"AnimatedNode"],[76,43,49,42],[77,0,49,42],[77,7,49,20],[77,8,48,4],[78,0,50,3],[82,33,52,13],[83,0,52,13],[85,0,53,4],[85,13,53,9,"__nativeInitialize"],[85,31,53,4],[87,0,54,4],[87,13,54,9,"__inputNodes"],[87,25,54,4],[87,29,55,6],[87,34,55,11,"__inputNodes"],[87,46,55,6],[87,47,55,24,"forEach"],[87,54,55,6],[87,55,55,32],[87,65,55,32,"node"],[87,69,55,36],[88,0,55,36],[88,17,55,40,"node"],[88,21,55,44],[88,22,55,45,"__addChild"],[88,32,55,40],[88,33,55,56],[88,38,55,40],[88,39,55,36],[89,0,55,36],[89,9,55,6],[89,10,54,4],[90,0,56,3],[93,33,58,13],[94,0,58,13],[96,0,59,4],[96,13,59,9,"__inputNodes"],[96,25,59,4],[96,29,60,6],[96,34,60,11,"__inputNodes"],[96,46,60,6],[96,47,60,24,"forEach"],[96,54,60,6],[96,55,60,32],[96,65,60,32,"node"],[96,69,60,36],[97,0,60,36],[97,17,60,40,"node"],[97,21,60,44],[97,22,60,45,"__removeChild"],[97,35,60,40],[97,36,60,59],[97,42,60,40],[97,43,60,36],[98,0,60,36],[98,9,60,6],[98,10,59,4],[100,0,61,4],[100,13,61,9,"__nativeTearDown"],[100,29,61,4],[101,0,62,3],[104,35,69,15],[105,0,70,4],[105,12,70,8],[105,17,70,13,"__lastLoopID"],[105,29,70,8],[105,32,70,28,"loopID"],[105,38,70,4],[105,40,70,36],[106,0,71,6],[106,15,71,11,"__lastLoopID"],[106,27,71,6],[106,30,71,26,"loopID"],[106,36,71,6],[107,0,72,6],[107,17,72,14],[107,22,72,19,"__memoizedValue"],[107,37,72,14],[107,40,72,37],[107,45,72,42,"__onEvaluate"],[107,57,72,37],[107,59,72,6],[108,0,73,5],[110,0,74,4],[110,15,74,11],[110,20,74,16,"__memoizedValue"],[110,35,74,4],[111,0,75,3],[114,41,77,21,"newValue"],[114,49],[114,51,77,31],[115,0,78,4],[115,13,78,9,"__memoizedValue"],[115,28,78,4],[115,31,78,27,"newValue"],[115,39,78,4],[117,0,79,4],[117,13,79,9,"__markUpdated"],[117,26,79,4],[118,0,80,3],[121,56,82,36],[122,0,83,4],[122,13,83,9,"__lastLoopID"],[122,25,83,4],[122,28,83,24],[122,29,83,4],[124,0,84,4],[124,13,84,9,"__markUpdated"],[124,26,84,4],[125,0,85,3],[128,38,87,18],[129,0,88,4,"UPDATED_NODES"],[129,8,88,4,"UPDATED_NODES"],[129,21,88,17],[129,22,88,18,"push"],[129,26,88,4],[129,27,88,23],[129,31,88,4],[131,0,89,4],[131,12,89,8],[131,13,89,9,"propUpdatesEnqueued"],[131,32,89,4],[131,34,89,30],[132,0,90,6,"propUpdatesEnqueued"],[132,10,90,6,"propUpdatesEnqueued"],[132,29,90,25],[132,32,90,28,"setImmediate"],[132,44,90,40],[132,45,90,41,"runPropUpdates"],[132,59,90,40],[132,60,90,6],[133,0,91,5],[134,0,92,3],[137,43,94,23],[138,0,95,4],[138,12,95,8],[138,13,95,9],[138,18,95,14,"__initialized"],[138,31,95,4],[138,33,95,29],[139,0,96,6,"ReanimatedModule"],[139,36,96,23,"createNode"],[139,46,96,6],[139,47,96,34],[139,52,96,39,"__nodeID"],[139,60,96,6],[139,80,96,54],[139,85,96,59,"__nodeConfig"],[139,97,96,6],[141,0,97,6],[141,15,97,11,"__initialized"],[141,28,97,6],[141,31,97,27],[141,35,97,6],[142,0,98,5],[143,0,99,3],[146,41,101,21],[147,0,102,4],[147,12,102,8],[147,17,102,13,"__initialized"],[147,30,102,4],[147,32,102,28],[148,0,103,6,"ReanimatedModule"],[148,36,103,23,"dropNode"],[148,44,103,6],[148,45,103,32],[148,50,103,37,"__nodeID"],[148,58,103,6],[150,0,104,6],[150,15,104,11,"__initialized"],[150,28,104,6],[150,31,104,27],[150,36,104,6],[151,0,105,5],[152,0,106,3],[155,46,108,26],[156,0,109,4],[156,15,109,11],[156,20,109,16,"__initialized"],[156,33,109,4],[157,0,110,3],[160,37,112,17],[161,0,113,4],[161,14,113,10],[161,18,113,14,"Error"],[161,23,113,10],[161,24,113,20],[161,62,113,10],[161,63,113,4],[162,0,114,3],[165,35,116,15],[166,0,117,4],[166,15,117,11],[166,20,117,16,"__getValue"],[166,30,117,11],[166,32,117,4],[167,0,118,3],[170,38,120,18],[171,0,121,4],[171,15,121,11],[171,20,121,16,"__children"],[171,30,121,4],[172,0,122,3],[175,33,124,13,"child"],[175,38],[175,40,124,20],[176,0,125,4],[176,12,125,8],[176,17,125,13,"__children"],[176,27,125,8],[176,28,125,24,"length"],[176,34,125,8],[176,39,125,35],[176,40,125,4],[176,42,125,38],[177,0,126,6],[177,15,126,11,"__attach"],[177,23,126,6],[178,0,127,5],[180,0,128,4],[180,13,128,9,"__children"],[180,23,128,4],[180,24,128,20,"push"],[180,28,128,4],[180,29,128,25,"child"],[180,34,128,4],[182,0,129,4,"child"],[182,8,129,4,"child"],[182,13,129,9],[182,14,129,10,"__nativeInitialize"],[182,32,129,4],[184,0,131,4,"ReanimatedModule"],[184,34,131,21,"connectNodes"],[184,46,131,4],[184,47,131,34],[184,52,131,39,"__nodeID"],[184,60,131,4],[184,62,131,49,"child"],[184,67,131,54],[184,68,131,55,"__nodeID"],[184,76,131,4],[185,0,132,3],[188,36,134,16,"child"],[188,41],[188,43,134,23],[189,0,135,4],[189,12,135,10,"index"],[189,17,135,15],[189,20,135,18],[189,25,135,23,"__children"],[189,35,135,18],[189,36,135,34,"indexOf"],[189,43,135,18],[189,44,135,42,"child"],[189,49,135,18],[189,50,135,4],[191,0,136,4],[191,12,136,8,"index"],[191,17,136,13],[191,22,136,18],[191,23,136,19],[191,24,136,4],[191,26,136,22],[192,0,137,6,"console"],[192,10,137,6,"console"],[192,17,137,13],[192,18,137,14,"warn"],[192,22,137,6],[192,23,137,19],[192,68,137,6],[193,0,138,6],[194,0,139,5],[196,0,140,4,"ReanimatedModule"],[196,34,140,21,"disconnectNodes"],[196,49,140,4],[196,50,140,37],[196,55,140,42,"__nodeID"],[196,63,140,4],[196,65,140,52,"child"],[196,70,140,57],[196,71,140,58,"__nodeID"],[196,79,140,4],[198,0,142,4],[198,13,142,9,"__children"],[198,23,142,4],[198,24,142,20,"splice"],[198,30,142,4],[198,31,142,27,"index"],[198,36,142,4],[198,38,142,34],[198,39,142,4],[200,0,143,4],[200,12,143,8],[200,17,143,13,"__children"],[200,27,143,8],[200,28,143,24,"length"],[200,34,143,8],[200,39,143,35],[200,40,143,4],[200,42,143,38],[201,0,144,6],[201,15,144,11,"__detach"],[201,23,144,6],[202,0,145,5],[203,0,146,3],[206,43,148,23,"nativeViewTag"],[206,56],[206,58,148,38],[207,0,149,4,"ReanimatedModule"],[207,34,149,21,"connectNodeToView"],[207,51,149,4],[207,52,149,39],[207,57,149,44,"__nodeID"],[207,65,149,4],[207,67,149,54,"nativeViewTag"],[207,80,149,4],[208,0,150,3],[211,46,152,26,"nativeViewTag"],[211,59],[211,61,152,41],[212,0,153,4,"ReanimatedModule"],[212,34,153,21,"disconnectNodeFromView"],[212,56,153,4],[212,57,153,44],[212,62,153,49,"__nodeID"],[212,70,153,4],[212,72,153,59,"nativeViewTag"],[212,85,153,4],[213,0,154,3]]},"type":"js/module"}]}